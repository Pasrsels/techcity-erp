{% extends "base.html" %}
{% load static%}
{% block title%} Inventory {% endblock%}
{% block content %}
   <div class="inventory">
        <div class="row mt-2">
            <div class="col">
                <div class="card">
                    <div class="card-body border">
                        <h6>Activity graph</h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="inventory-navbar mt-2">
            <nav class="d-flex justify-content-between align-items-center border rounded p-2">
                <div class="d-flex">
                    <div class="px-1">
                        <a href='{% url 'inventory:inventory' %}' class="btn btn-primary btn-sm">
                            <i class='bx bx-arrow-back' ></i>
                        </a>
                    </div>
                    <div>
                        <h6 class='mt-1'>{{inventory.product.name}}</h6>
                    </div>
                </div>
                <div class="search d-flex align-items-center">
                    {% comment %} <select class="form-select" id="category">
                        <option value="">---select category---</option>
                        {% for category in categories%}
                            <option value={{category.id}}>{{category.name}}</option>
                        {% endfor %}
                    </select> {% endcomment %}
                    <span class="px-1"></span>
                    <form method="get">
                        <div>
                            <input
                                id="search"
                                name="q"
                                type="search"
                                value="{{search_query}}"
                                class="form-control"
                                placeholder="date....."
                            />
                        </div>
                    </form>
                </div>
            </nav>
        </div>
        <div>
            <p class='mt-3 px-1'>Product Activity</p>
        <div class="table-detail mt-2">
            <!-- inventory table -->
            <table class='table border rounded p-2'>
                <tbody>
                    {% for log in logs %}
                        <tr>
                            <td>{{log.timestamp}}</td>
                            
                            <td>
                                {% if request.user.profile_image %}
                                    <img class='rounded-circle' src='{{log.user.profile_image.url}}' width='25px'/> 
                                {% else %}
                                    <img class="rounded-circle" src="{% static 'assets/avatar.png'%}" width="35px"/>
                                {% endif %}
                               <span>{{log.user}}</span>
                            </td>
                            <td>{{log.action}}</td>
                            <td>{% if log.action == 'Create' or log.action == 'Update' %}
                                    <span class='text-success'>{{log.quantity}}</span>
                                    <i class='text-success bx bx-chevron-up'></i>
                                {% elif log.action == 'Edit'%}
                                    <span class='text-primary'>{{log.quantity}}</span>
                                    <i class='text-primary bx bxs-circle bx-rotate-90 bx-tada' undefined ></i>
                                {% elif log.action == 'Decline'%}
                                    <span class='text-danger'>{{log.quantity}}</span>
                                    <i class='text-danger bx bxs-circle bx-rotate-90 bx-tada' undefined ></i>
                                {% else %}
                                    <span class='text-danger'>{{log.quantity}}</span>
                                    <i class='text-danger bx bx-chevron-down'></i>
                                {% endif %}
                            </td>
                            <td>{{log.total_quantity}}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>  
        </div>
   </div>  
{% endblock content %}