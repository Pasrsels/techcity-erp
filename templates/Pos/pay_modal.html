{% load static%}
{% block content %}

<div class='payment'>
    <div class="bg-secondary text-light border d-flex justify-content-between align-items-center rounded w-100 py-2">
        <h4 class='px-2' id="id_customer_details">Process Payment -> <span>Cash</span></h4>
       <div class='px-2'>
            <button id='closebtn' class="btn-close text-light btn-sm"></button>
       </div>
    </div>
    <div class='row mt-2 payment-details'>
        <div class='col-3 border p-2'>
            <h5>Order details</h5>
            <table class="table table-borderless">
                <tbody id="order_details"></tbody>
            </table>
           <div>
                <table id="oder_details_foot" class="table table-borderless">
                    <tr>
                        <td class='px-5 fw-bold'>Subtotal</td>
                        <td class="d-flex justify-content-end" id="id_subtotal"></td>
                    </tr>
                    <tr id='disc'>
                        <td id="id_dcp"class='px-5 fw-bold'></td>
                        <td class="d-flex justify-content-end" id="id_disc">
                            <span class='disc_c'>0.00</span>
                        </td>
                    </tr>
                    <tr>
                        <td class='px-5 fw-bold'>VAT</td>
                        <td class="d-flex justify-content-end" id="id_vat">0.00</td>
                    </tr>
                    <tr id='d_charge'>
                        <td class='px-5 fw-bold'>Delivery Charge</td>
                        <td class="d-flex justify-content-end" id="id_delivery_charge">
                            <span class='d_c'>0.00</span>
                        </td>
                    </tr>
                    <tr id='int'>
                        <td class='px-5 fw-bold'>Interest Amount</td>
                        <td class="d-flex justify-content-end" id="id_interest_amount">
                            <span class='inter'>0.00</span>
                        </td>
                    </tr>
                    <tr id='prv'>
                        <td class='px-5 fw-bold'>Previous Due</td>
                        <td class="d-flex justify-content-end" id="previous_due">
                            <span class='p_due'>25.00</span>
                        </td>
                    </tr>
                    <tr>
                        <td class='px-5 fw-bold'>Current Due</td>
                        <td class="d-flex justify-content-end" id="id_due_amount">0.00</td>
                    </tr>
                    <tr id='prv'>
                        <td class='px-5 fw-bold'>Total Balance</td>
                        <td class="d-flex justify-content-end" id="tb_due">
                            <span class='p_due' id='total_balance_due'>25.00</span>
                        </td>
                    </tr>
                    <tr>
                        <td class='px-5 fw-bold'>Amount Paid</td>
                        <td class="d-flex justify-content-end" id="id_paid_amount">0.00</td>
                    </tr>
                    <tr>
                        <td class='px-5 fw-bold'>Due Amount</td>
                        <td class="d-flex justify-content-end fw-bold" id="id_balance">0.00</td>
                    </tr>
                    
                </table>
           </div>
        </div>
        <div class='col-6 border p-2'>
            <div class='payment-form mt-3'>
                <div class='mb-2 d-flex align-items-center'>
                    <label for="id_amount_paid" class="px-2">Amount</label>
                    <input
                        id='id_amount_paid'
                        name='amount'
                        type="number"
                        class='form-control'
                     />
                </div>

                <div class="credit border rounded p-2 mb-2">
                    <p>Credit details</p>
                    <div class="mb-2">
                        <label for="id_date">Credit Duration</label>
                        <input
                            type="number"
                            class="form-control"
                            placeholder="number of days"
                            id="id_days"
                            value="0"
                        />
                    </div>
                </div>
                <div class="mb-2 d-flex justify-content-between align-items-center">
                    <div class="d-flex">
                        <label for="reoccuring">Reoccuring</label>
                        <input class="mx-2" type="checkbox" id="reoccuring" class="form-check"/>
                    </div>
                    <div class="hidden" id="next_due_date_p">
                        <label class="mx-2" for="next_due_date">Next due days</label>
                        <input type="number" id="next_due_date" class="form-control"/>
                    </div>
                </div>
                <div class='d-flex align-items-center'>
                    <label for="id_note p-1" class="px-2">Note</label>
                    <textarea
                        title="note"
                        id='id_note'
                        rows='2'
                        name='note'
                        class='form-control'
                        placeholder=""
                    ></textarea>
                </div>
            </div>
            <small class'text-danger fw-bold' id='pay_error'></small>
        </div>
        <div class="col-3 border p-2">
            <div class='button-choose w-100'>
                <div class="w-100 p-2">
                    <button type="button"  class='btn btn-light btn-lg w-100 pm' data-name='cash' id="id_cash_btn" onclick="processCart(this)">
                        CASH
                    </button>
                </div>

                <div class="w-100 mt-2 p-2">
                    <button type="button" class='bank btn btn-success btn-lg w-100 pm' data-name='pay_later' id="id_paylater" onclick="processCart(this)">
                        PAY LATER
                    </button>
                </div>

                <div class="w-100 mt-2 p-2">
                    <button type="button" class='bank btn btn-secondary btn-lg w-100 pm' data-name='bank' id="id_bank_transfer" onclick="processCart(this)">
                        BANK CARD
                    </button>
                </div>

                <div class="w-100 mt-2 p-2">
                    <button type="button" class='ecocash btn btn-primary btn-lg w-100 pm' data-name='ecocash' id="id_credit_ecocash" onclick="processCart(this)">
                        ECOCASH
                    </button>
                </div>

                <div class="w-100 mt-2 p-2">
                    <button type="button" class='btn btn-danger btn-lg w-100 pm' data-name='qoutation'  onclick="processCart(this)">
                        QOUTATION
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const previousV = document.querySelector('.p_due');
    const interestV = document.querySelector('.inter');
    const deliveryV = document.querySelector('.d_c');
    const discountV = document.querySelector('.disc_c');

    const reocurring = document.getElementById('reoccuring');
    const nextDueDaysEl = document.getElementById('next_due_date_p');
    const nextDueDays = document.getElementById('next_due_date');

    reocurring.addEventListener('click', () => {
        nextDueDaysEl.classList.toggle('hidden');
        nextDueDaysEl.classList.toggle('d-flex');
    });

    function hideIfZero(element, selector) {
        if (element.textContent.trim() === '0.00') {
            const el = document.querySelector(selector);
            el.style.display = 'none';
            el.classList.add('hidden');
        }
    }

    hideIfZero(previousV, '#prv');
    hideIfZero(interestV, '#int');
    hideIfZero(deliveryV, '#d_charge');
    hideIfZero(discountV, '#disc');
</script>

{% endblock content %}
