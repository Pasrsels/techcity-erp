{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="d-flex align-items-center justify-content-between mt-2 rounded shadow header py-2 mb-3">
        <h5 class="text-light px-1">Supplier List</h5>
        <!-- Add Product Button -->
        <div class="px-1">
            <button type="button" class="btn btn-primary btn-sm" id="addButton">
                <i class="bx bx-plus"></i> Add Supplier
            </button>
        </div>
    </div>

    <table id="supplier_list" class="table table-striped table-bordered" style="width: 100%;">
        <thead style="background-color: #3734f4; color: white;">
            <tr>
                <th style="font-weight: 500;">Name</th>
                <th style="font-weight: 500;">Products</th>
                <th style="font-weight: 500;">Contact Number</th>
                <th style="font-weight: 500;">Email</th>
                <th style="font-weight: 500;">Address</th>
                <th style="font-weight: 500;">Contact Person</th>
                <th style="font-weight: 500;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for supplier in suppliers %}
            <tr>
                <td>{{ supplier.name }}</td>
                <td>
                    {% for product in supplier.products.all %}
                    <span>{{ product.name }}</span>
                    {% endfor %}
                </td>
                <td>{{ supplier.contact_number }}</td>
                <td>{{ supplier.email }}</td>
                <td>{{ supplier.address }}</td>
                <td>{{ supplier.contact_person }}</td>
                <td>
                    <!-- Add action buttons here, such as Edit or Delete -->
                    <button class="btn btn-warning btn-sm">Edit</button>
                    <button class="btn btn-danger btn-sm">Delete</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Add supplier modal -->
    <div class="modal fade" id="addSupplierModal" tabindex="-1" aria-labelledby="loaderModalLabel" data-backdrop="static" data-keyboard="false" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <h5>Add Supplier</h5>
                    <form method="post">
                        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                        <div id="div_id_name" class="mb-3">
                            <label for="id_name" class="form-label requiredField">
                                Name<span class="asteriskField">*</span>
                            </label>
                            <input type="text" name="name" maxlength="255" class="textinput form-control" required="" id="id_name">
                        </div>
                        <div id="div_id_contact_person" class="mb-3">
                            <label for="id_contact_person" class="form-label requiredField">
                                Contact person<span class="asteriskField">*</span>
                            </label>
                            <input type="text" name="contact_person" maxlength="255" class="textinput form-control" required="" id="id_contact_person">
                        </div>
                        <div id="div_id_phone" class="mb-3">
                            <label for="id_phone" class="form-label requiredField">
                                Phone<span class="asteriskField">*</span>
                            </label>
                            <input type="text" name="phone" maxlength="255" class="textinput form-control" required="" id="id_phone">
                        </div>
                        <div id="div_id_email" class="mb-3">
                            <label for="id_email" class="form-label requiredField">
                                Email<span class="asteriskField">*</span>
                            </label>
                            <input type="email" name="email" maxlength="255" class="emailinput form-control" required="" id="id_email">
                        </div>

                        <div id="div_id_products" class="mb-3">
                            <label for="id_products" class="form-label requiredField">
                                Products
                                <span class="asteriskField">*</span>
                            </label>
                            <select name="products" class="select form-select" required="" id="id_products">
                                <option value="" selected="">Select Product</option>
                                {% for product in products %}
                                <option value="{{ product.id }}">{{ product.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <button type="submit">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        const addButton = document.getElementById('addButton');
        const supplierModal = new bootstrap.Modal(document.getElementById('addSupplierModal'));

        addButton.addEventListener('click', () => {
            supplierModal.show();
        });
    </script>

</div>
{% endblock %}

